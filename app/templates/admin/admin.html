<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Administração Decibell</title>
    <style>
        /* Variáveis de tema */
        :root {
            --fundo-claro: #f0f2f5;
            --texto-claro: #1a1a1a;
            --card-claro: #ffffff;
            --borda-claro: #e0e0e0;
            --primaria-claro: #2c3e50;
            --secundaria-claro: #34495e;
            --sombra-claro: rgba(0, 0, 0, 0.1);
            --gradiente-escuro: linear-gradient(to right, #232526, #414345);
            --gradiente-escuro-hover: linear-gradient(to right, #414345, #232526);
            --cor-link: #3498db;
            --cor-link-hover: #2980b9;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--fundo-claro);
            color: var(--texto-claro);
            margin: 0;
            padding: 0;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }

        /* Títulos */
        h1 {
            font-size: 2.25rem;
            font-weight: 700;
            color: var(--primaria-claro);
            margin-bottom: 1.5rem;
        }
        
        h3 {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--texto-claro);
        }

        /* Estilo dos Cards */
        .card {
            background-color: var(--card-claro);
            border: 1px solid var(--borda-claro);
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px var(--sombra-claro), 0 2px 4px -1px var(--sombra-claro);
            padding: 1.5rem;
        }

        /* Layout Responsivo com Flexbox e Grid */
        .grid {
            display: grid;
            gap: 1rem;
        }

        .grid-cols-1 { grid-template-columns: 1fr; }
        @media (min-width: 768px) { .md\:grid-cols-2 { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .lg\:grid-cols-4 { grid-template-columns: repeat(4, 1fr); } }

        .kpi-cards {
            display: grid;
            gap: 1rem;
        }
        @media (min-width: 768px) { .kpi-cards { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .kpi-cards { grid-template-columns: repeat(4, 1fr); } }

        .main-content {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            margin-top: 2rem;
        }
        @media (min-width: 768px) { .main-content { grid-template-columns: repeat(2, 1fr); } }
        @media (min-width: 1024px) { .main-content { grid-template-columns: 4fr 3fr; } }
        
        .bottom-sections {
            display: grid;
            gap: 1rem;
            margin-top: 2rem;
        }
        @media (min-width: 1024px) { .bottom-sections { grid-template-columns: 2fr 1fr; } }
        @media (min-width: 1280px) { .bottom-sections { grid-template-columns: 2fr 1fr; } }

        .left-sections {
            display: grid;
            gap: 2rem;
        }
        
        .tables {
            display: grid;
            gap: 2rem;
        }
        @media (min-width: 768px) { .tables { grid-template-columns: repeat(2, 1fr); } }

        /* Componentes */
        .kpi-card {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .kpi-card .header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.5rem;
        }
        .kpi-card h3 { font-size: 0.875rem; color: #6b7280; font-weight: 500; }
        .kpi-card .value { font-size: 1.875rem; font-weight: 700; }
        .kpi-card p { font-size: 0.75rem; }
        .kpi-card .change-increase { color: #22c55e; }
        .kpi-card .change-decrease { color: #ef4444; }

        .analytics-chart-card {
            height: 400px;
            display: flex;
            flex-direction: column;
        }
        .analytics-chart-wrapper {
            flex-grow: 1;
            display: flex;
            align-items: flex-end;
            padding: 1rem;
        }
        .analytics-chart-bar {
            background-color: var(--cor-link);
            border-top-left-radius: 0.25rem;
            border-top-right-radius: 0.25rem;
            transition: all 0.5s ease-in-out;
            margin: 0 0.25rem;
            width: 100%;
            position: relative;
        }
        .analytics-chart-bar .label {
            font-size: 0.75rem;
            color: #6b7280;
            text-align: center;
            position: absolute;
            bottom: -1.5rem;
            width: 100%;
        }

        .recent-sales-card {
            height: 400px;
            display: flex;
            flex-direction: column;
        }
        .recent-sales-card .sales-list {
            flex-grow: 1;
            margin-top: 1rem;
            overflow-y: auto;
        }
        .sale-item {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        .sale-item .icon {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 9999px;
            background-color: #e5e7eb;
            color: #6b7280;
        }
        .sale-item .info { margin-left: 1rem; }
        .sale-item .amount { margin-left: auto; font-weight: 500; }

        /* Tabelas */
        .table-card { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; text-align: left; }
        table th { padding: 0.5rem 1rem; font-size: 0.875rem; color: #6b7280; font-weight: 500; border-bottom: 1px solid var(--borda-claro); }
        table td { padding: 0.5rem 1rem; font-size: 0.875rem; color: var(--texto-claro); border-bottom: 1px solid var(--borda-claro); }
        table tr:last-child td { border-bottom: none; }
        .table-actions button {
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;
            font-size: 0.875rem;
        }

        /* Tabs */
        .tabs {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 1rem;
        }
        .tabs-list {
            display: flex;
            background-color: #e5e7eb;
            padding: 0.25rem;
            border-radius: 0.5rem;
        }
        .tab-trigger {
            padding: 0.5rem 1rem;
            cursor: pointer;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            font-weight: 500;
            transition: background-color 0.2s;
            border: none;
            background: none;
        }
        .tab-trigger.active {
            background-color: var(--card-claro);
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }

        /* Formulário de Adição */
        .add-product-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1rem;
        }
        .add-product-form input,
        .add-product-form button {
            padding: 0.75rem;
            border: 1px solid var(--borda-claro);
            border-radius: 0.5rem;
            font-size: 1rem;
        }
        .add-product-form button {
            background-color: var(--primaria-claro);
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            border: none;
        }
        .add-product-form button:hover {
            background-color: var(--secundaria-claro);
        }

        /* Gerador de Conteúdo AI */
        .ai-content-generator textarea {
            width: 100%;
            height: 10rem;
            padding: 0.5rem;
            border: 1px solid var(--borda-claro);
            border-radius: 0.5rem;
            resize: none;
        }
        .ai-content-generator button {
            width: 100%;
            padding: 0.75rem;
            background-color: var(--cor-link);
            color: white;
            border: none;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .ai-content-generator button:hover { background-color: var(--cor-link-hover); }
        .ai-content-generator .loading-spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-top: 4px solid var(--primaria-claro);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .ai-content-generator .output-box {
            padding: 1rem;
            background-color: #f3f4f6;
            border-radius: 0.5rem;
            margin-top: 1rem;
            white-space: pre-wrap;
        }

        .skeleton {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            background-color: #e5e7eb;
            border-radius: 0.75rem;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: .5; }
        }

    </style>
</head>
<body>

    <div class="container">
        <h1>Painel de Administração Decibell</h1>

        <!-- Tabs para seleção do período -->
        <div class="tabs">
            <div class="tabs-list">
                <button class="tab-trigger" data-value="24h">24 Horas</button>
                <button class="tab-trigger" data-value="7d">7 Dias</button>
                <button class="tab-trigger active" data-value="30d">30 Dias</button>
                <button class="tab-trigger" data-value="12m">12 Meses</button>
            </div>
        </div>

        <!-- Conteúdo do Dashboard -->
        <div id="dashboard-content">
            <!-- KPIs -->
            <div id="kpi-cards" class="kpi-cards"></div>

            <div class="main-content">
                <!-- Analytics Chart -->
                <div id="analytics-chart" class="card analytics-chart-card"></div>

                <!-- Recent Sales -->
                <div id="recent-sales" class="card recent-sales-card"></div>
            </div>

            <div class="bottom-sections">
                <div class="left-sections">
                    <div class="card">
                        <h3>Adicionar Produto</h3>
                        <form id="add-product-form" class="add-product-form">
                            <input type="text" id="product-name" placeholder="Nome do Produto" required>
                            <input type="text" id="product-brand" placeholder="Marca" required>
                            <input type="number" id="product-price" placeholder="Preço" step="0.01" required>
                            <input type="text" id="product-status" placeholder="Status (Ex: 'Em estoque')" required>
                            <button type="submit">Adicionar Produto</button>
                        </form>
                    </div>
                    <div class="tables">
                        <!-- Product Table -->
                        <div id="products-table" class="card table-card"></div>
                        <!-- Brand Table -->
                        <div id="brands-table" class="card table-card"></div>
                    </div>
                    <div class="card">
                         <!-- User Table -->
                        <div id="users-table" class="table-card"></div>
                    </div>
                </div>
                <!-- AI Content Generator -->
                <div id="ai-content-generator" class="card ai-content-generator"></div>
            </div>
        </div>
    </div>

    <script>
        // ==============================================================================
        // MOCK DATA and API FUNCTIONS
        // ==============================================================================

        const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        const mockData = {
          '24h': {
            totalRevenue: { value: "R$ 1.250,00", change: "+15%", changeType: "increase", description: "do que nas últimas 24h" },
            subscriptions: { value: "+10", change: "+25%", changeType: "increase", description: "do que nas últimas 24h" },
            sales: { value: "+5", change: "-5%", changeType: "decrease", description: "do que nas últimas 24h" },
            activeNow: { value: "12", change: "+3", changeType: "increase", description: "visitantes ativos agora" },
            analytics: [
              { name: '12h', total: 100 }, { name: '11h', total: 120 }, { name: '10h', total: 150 },
              { name: '9h', total: 130 }, { name: '8h', total: 180 }, { name: '7h', total: 160 },
              { name: '6h', total: 200 }, { name: '5h', total: 220 }, { name: '4h', total: 250 },
              { name: '3h', total: 230 }, { name: '2h', total: 280 }, { name: '1h', total: 300 },
            ],
            recentSales: [
              { email: "olivia.martin@email.com", amount: "R$ 150,00" },
              { email: "john.doe@email.com", amount: "R$ 450,00" },
              { email: "jane.smith@email.com", amount: "R$ 300,00" },
            ],
          },
          '7d': {
            totalRevenue: { value: "R$ 8.500,00", change: "+5.1%", changeType: "increase", description: "do que nos últimos 7 dias" },
            subscriptions: { value: "+45", change: "+10%", changeType: "increase", description: "do que nos últimos 7 dias" },
            sales: { value: "+30", change: "+2%", changeType: "increase", description: "do que nos últimos 7 dias" },
            activeNow: { value: "48", change: "+15", changeType: "increase", description: "visitantes ativos agora" },
            analytics: [
              { name: 'Dia 1', total: 500 }, { name: 'Dia 2', total: 600 },
              { name: 'Dia 3', total: 800 }, { name: 'Dia 4', total: 750 },
              { name: 'Dia 5', total: 900 }, { name: 'Dia 6', total: 850 },
              { name: 'Dia 7', total: 1000 },
            ],
            recentSales: [
              { email: "olivia.martin@email.com", amount: "R$ 150,00" },
              { email: "john.doe@email.com", amount: "R$ 450,00" },
              { email: "jane.smith@email.com", amount: "R$ 300,00" },
              { email: "olivia.martin@email.com", amount: "R$ 150,00" },
              { email: "john.doe@email.com", amount: "R$ 450,00" },
              { email: "jane.smith@email.com", amount: "R$ 300,00" },
            ],
          },
          '30d': {
            totalRevenue: { value: "R$ 35.000,00", change: "+12.1%", changeType: "increase", description: "do que nos últimos 30 dias" },
            subscriptions: { value: "+120", change: "+8%", changeType: "increase", description: "do que nos últimos 30 dias" },
            sales: { value: "+100", change: "+15%", changeType: "increase", description: "do que nos últimos 30 dias" },
            activeNow: { value: "105", change: "+40", changeType: "increase", description: "visitantes ativos agora" },
            analytics: [
              { name: 'Sem 1', total: 5000 }, { name: 'Sem 2', total: 7500 },
              { name: 'Sem 3', total: 6800 }, { name: 'Sem 4', total: 8200 },
            ],
            recentSales: [
              { email: "olivia.martin@email.com", amount: "R$ 150,00" },
              { email: "john.doe@email.com", amount: "R$ 450,00" },
              { email: "jane.smith@email.com", amount: "R$ 300,00" },
              { email: "olivia.martin@email.com", amount: "R$ 150,00" },
              { email: "john.doe@email.com", amount: "R$ 450,00" },
              { email: "jane.smith@email.com", amount: "R$ 300,00" },
            ],
          },
          '12m': {
            totalRevenue: { value: "R$ 450.000,00", change: "+20%", changeType: "increase", description: "do que nos últimos 12 meses" },
            subscriptions: { value: "+1.500", change: "+18%", changeType: "increase", description: "do que nos últimos 12 meses" },
            sales: { value: "+1.200", change: "+25%", changeType: "increase", description: "do que nos últimos 12 meses" },
            activeNow: { value: "350", change: "+100", changeType: "increase", description: "visitantes ativos agora" },
            analytics: [
              { name: 'Jan', total: 20000 }, { name: 'Fev', total: 25000 },
              { name: 'Mar', total: 30000 }, { name: 'Abr', total: 35000 },
              { name: 'Mai', total: 40000 }, { name: 'Jun', total: 45000 },
              { name: 'Jul', total: 50000 }, { name: 'Ago', total: 55000 },
              { name: 'Set', total: 60000 }, { name: 'Out', total: 65000 },
              { name: 'Nov', total: 70000 }, { name: 'Dez', total: 75000 },
            ],
            recentSales: [
              { email: "olivia.martin@email.com", amount: "R$ 150,00" },
              { email: "john.doe@email.com", amount: "R$ 450,00" },
              { email: "jane.smith@email.com", amount: "R$ 300,00" },
              { email: "olivia.martin@email.com", amount: "R$ 150,00" },
              { email: "john.doe@email.com", amount: "R$ 450,00" },
              { email: "jane.smith@email.com", amount: "R$ 300,00" },
            ],
          },
        };
        const getDashboardData = async (timeRange) => {
            await delay(500); // Simula o tempo de carregamento da API
            return mockData[timeRange];
        };

        let currentProducts = [
            { id: 1, name: "Fone X Pro", brand: "Decibell", price: 599.90, status: "Em estoque" },
            { id: 2, name: "Headphone Y", brand: "AudioTech", price: 249.90, status: "Em falta" },
            { id: 3, name: "Earbuds Z", brand: "SoundWave", price: 150.00, status: "Em estoque" },
        ];
        const mockBrands = [
            { id: 1, name: "Decibell", products: 12, revenue: "R$ 15.000" },
            { id: 2, name: "AudioTech", products: 8, revenue: "R$ 9.500" },
            { id: 3, name: "SoundWave", products: 20, revenue: "R$ 22.000" },
        ];
        const mockUsers = [
            { id: 1, name: "Diogo Martins", email: "diogo.martins@email.com", purchases: 5 },
            { id: 2, name: "Maria Clara", email: "maria.clara@email.com", purchases: 2 },
            { id: 3, name: "João Silva", email: "joao.silva@email.com", purchases: 1 },
        ];

        // ==============================================================================
        // ICONS (SVG puro)
        // ==============================================================================
        const icons = {
            DollarSign: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>`,
            Users: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>`,
            CreditCard: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg>`,
            Activity: `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline></svg>`,
        };

        // ==============================================================================
        // DOM MANIPULATION AND RENDERING FUNCTIONS
        // ==============================================================================

        const renderKpiCards = (data) => {
            const kpiContainer = document.getElementById('kpi-cards');
            kpiContainer.innerHTML = `
                <div class="card kpi-card">
                    <div class="header">
                        <h3>Receita Total</h3>
                        <div class="h-4 w-4 text-gray-500">${icons.DollarSign}</div>
                    </div>
                    <div class="value">${data.totalRevenue.value}</div>
                    <p class="text-xs ${data.totalRevenue.changeType === 'increase' ? 'change-increase' : 'change-decrease'}">
                        ${data.totalRevenue.change} <span class="text-gray-500 ml-1">${data.totalRevenue.description}</span>
                    </p>
                </div>
                <div class="card kpi-card">
                    <div class="header">
                        <h3>Inscrições</h3>
                        <div class="h-4 w-4 text-gray-500">${icons.Users}</div>
                    </div>
                    <div class="value">${data.subscriptions.value}</div>
                    <p class="text-xs ${data.subscriptions.changeType === 'increase' ? 'change-increase' : 'change-decrease'}">
                        ${data.subscriptions.change} <span class="text-gray-500 ml-1">${data.subscriptions.description}</span>
                    </p>
                </div>
                <div class="card kpi-card">
                    <div class="header">
                        <h3>Vendas</h3>
                        <div class="h-4 w-4 text-gray-500">${icons.CreditCard}</div>
                    </div>
                    <div class="value">${data.sales.value}</div>
                    <p class="text-xs ${data.sales.changeType === 'increase' ? 'change-increase' : 'change-decrease'}">
                        ${data.sales.change} <span class="text-gray-500 ml-1">${data.sales.description}</span>
                    </p>
                </div>
                <div class="card kpi-card">
                    <div class="header">
                        <h3>Ativos Agora</h3>
                        <div class="h-4 w-4 text-gray-500">${icons.Activity}</div>
                    </div>
                    <div class="value">${data.activeNow.value}</div>
                    <p class="text-xs ${data.activeNow.changeType === 'increase' ? 'change-increase' : 'change-decrease'}">
                        ${data.activeNow.change} <span class="text-gray-500 ml-1">${data.activeNow.description}</span>
                    </p>
                </div>
            `;
        };

        const renderAnalyticsChart = (data) => {
            const chartContainer = document.getElementById('analytics-chart');
            const maxTotal = Math.max(...data.map(item => item.total));

            chartContainer.innerHTML = `
                <div class="analytics-chart-header">
                    <h3>Analytics</h3>
                </div>
                <div class="analytics-chart-wrapper">
                    ${data.map(item => `
                        <div class="analytics-chart-bar" style="height: ${(item.total / maxTotal) * 100}%;">
                            <span class="label">${item.name}</span>
                        </div>
                    `).join('')}
                </div>
            `;
        };

        const renderRecentSales = (sales) => {
            const salesContainer = document.getElementById('recent-sales');
            salesContainer.innerHTML = `
                <h3>Vendas Recentes</h3>
                <p class="text-sm text-gray-500">
                    Você fez ${sales.length} vendas este mês.
                </p>
                <div class="sales-list">
                    ${sales.map(sale => `
                        <div class="sale-item">
                            <div class="icon">${icons.Users}</div>
                            <div class="info">
                                <p class="text-sm font-medium leading-none">Novo cliente</p>
                                <p class="text-sm text-gray-500">${sale.email}</p>
                            </div>
                            <div class="amount">${sale.amount}</div>
                        </div>
                    `).join('')}
                </div>
            `;
        };

        const renderProductTable = () => {
            const tableContainer = document.getElementById('products-table');
            tableContainer.innerHTML = `
                <h3>Tabela de Produtos</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Marca</th>
                            <th>Preço</th>
                            <th>Status</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${currentProducts.map(product => `
                            <tr>
                                <td>${product.id}</td>
                                <td>${product.name}</td>
                                <td>${product.brand}</td>
                                <td>R$ ${product.price.toFixed(2).replace('.', ',')}</td>
                                <td>${product.status}</td>
                                <td class="table-actions">
                                    <button onclick="removeProduct(${product.id})">Remover</button>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        };

        const renderBrandTable = () => {
            const tableContainer = document.getElementById('brands-table');
            tableContainer.innerHTML = `
                <h3>Marcas</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Marca</th>
                            <th>Produtos</th>
                            <th>Receita</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${mockBrands.map(brand => `
                            <tr>
                                <td>${brand.name}</td>
                                <td>${brand.products}</td>
                                <td>${brand.revenue}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        };

        const renderUserTable = () => {
            const tableContainer = document.getElementById('users-table');
            tableContainer.innerHTML = `
                <h3>Usuários</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Nome</th>
                            <th>Email</th>
                            <th>Compras</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${mockUsers.map(user => `
                            <tr>
                                <td>${user.name}</td>
                                <td>${user.email}</td>
                                <td>${user.purchases}</td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            `;
        };

        const renderAiContentGenerator = () => {
            const generatorContainer = document.getElementById('ai-content-generator');
            generatorContainer.innerHTML = `
                <h3>Gerador de Conteúdo AI</h3>
                <p class="text-sm text-gray-500">
                    Gere descrições de produtos, posts de blog e mais.
                </p>
                <form id="ai-generator-form">
                    <textarea id="ai-prompt" placeholder="Ex: 'Escreva uma descrição para o fone X Pro...'"></textarea>
                    <button type="submit">Gerar Conteúdo</button>
                </form>
                <div id="ai-output" class="output-box" style="display: none;"></div>
                <div id="ai-loading" style="display: none; text-align: center;">
                    <div class="loading-spinner" style="margin: 1rem auto;"></div>
                </div>
            `;
        };

        // ==============================================================================
        // FUNÇÕES GLOBAIS DE INTERAÇÃO
        // ==============================================================================

        window.removeProduct = (id) => {
            currentProducts = currentProducts.filter(p => p.id !== id);
            localStorage.setItem('decibell_products_pure_js', JSON.stringify(currentProducts));
            renderProductTable();
        };

        const loadDashboard = async (timeRange) => {
            // Renderiza esqueletos enquanto os dados são carregados
            document.getElementById('kpi-cards').innerHTML = '<div class="card skeleton h-28"></div><div class="card skeleton h-28"></div><div class="card skeleton h-28"></div><div class="card skeleton h-28"></div>';
            document.getElementById('analytics-chart').innerHTML = '<div class="skeleton h-full"></div>';
            document.getElementById('recent-sales').innerHTML = '<div class="skeleton h-full"></div>';

            const data = await getDashboardData(timeRange);

            renderKpiCards(data);
            renderAnalyticsChart(data.analytics);
            renderRecentSales(data.recentSales);
        };

        const setupEventListeners = () => {
            // Eventos para as abas
            document.querySelectorAll('.tab-trigger').forEach(button => {
                button.addEventListener('click', () => {
                    document.querySelector('.tab-trigger.active').classList.remove('active');
                    button.classList.add('active');
                    const timeRange = button.getAttribute('data-value');
                    loadDashboard(timeRange);
                });
            });

            // Evento para o formulário de adicionar produto
            document.getElementById('add-product-form').addEventListener('submit', (e) => {
                e.preventDefault();
                const newProduct = {
                    id: Date.now(),
                    name: document.getElementById('product-name').value,
                    brand: document.getElementById('product-brand').value,
                    price: parseFloat(document.getElementById('product-price').value),
                    status: document.getElementById('product-status').value,
                };
                currentProducts.push(newProduct);
                localStorage.setItem('decibell_products_pure_js', JSON.stringify(currentProducts));
                renderProductTable();
                e.target.reset();
            });

            // Evento para o gerador de conteúdo AI
            document.getElementById('ai-generator-form').addEventListener('submit', async (e) => {
                e.preventDefault();
                const prompt = document.getElementById('ai-prompt').value;
                const outputDiv = document.getElementById('ai-output');
                const loadingDiv = document.getElementById('ai-loading');
                const submitButton = e.target.querySelector('button');
                
                outputDiv.style.display = 'none';
                loadingDiv.style.display = 'block';
                submitButton.disabled = true;

                await delay(2000);
                
                outputDiv.textContent = `Conteúdo gerado para o prompt: "${prompt}". Este é um conteúdo de exemplo. Você pode integrar uma API de IA aqui para gerar conteúdo real.`;
                outputDiv.style.display = 'block';
                loadingDiv.style.display = 'none';
                submitButton.disabled = false;
            });
        };

        // Função de inicialização
        const initialize = () => {
            const storedProducts = JSON.parse(localStorage.getItem('decibell_products_pure_js'));
            if (storedProducts) {
                currentProducts = storedProducts;
            }

            // Renderiza os componentes estáticos
            renderProductTable();
            renderBrandTable();
            renderUserTable();
            renderAiContentGenerator();
            
            // Carrega os dados iniciais
            const initialTimeRange = document.querySelector('.tab-trigger.active').getAttribute('data-value');
            loadDashboard(initialTimeRange);

            setupEventListeners();
        };

        window.onload = initialize;
    </script>
</body>
</html>
